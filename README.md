# STM32 ADC + UART (HAL) Example

 Простой пример проекта на STM32, демонстрирующий чтение аналогового сигнала через ADC и передачу данных по UART с использованием HAL.

## Платформа и инструменты

-  **MCU:** STM32F103C8T6 ("Blue Pill")
-  **Среда разработки:** STM32CubeIDE
-  **Библиотеки:** STM32 HAL (CubeMX)
-  **Отладка:** ST-Link V2

##  Описание проекта

Проект выполняет следующие функции:

1. Настраивает **ADC** на один канал в непрерывном режиме.
2. Использует **UART** для отправки результатов преобразования на ПК (через USB-UART CH340G).
3. Передача выполняется в текстовом виде, с задержкой.

## Структура проекта
```
stm32-adc-uart-hal/
├── Core/                  # Исходники и заголовки проекта
│   ├── Inc/               # Заголовочные файлы (.h)
│   └── Src/               # Исходные файлы (.c)
├── Drivers/               # Драйверы STM32 HAL
├── .gitignore             # Исключения Git
├── README.md              # Документация
├── STM32F103C8TX_FLASH.ld # Линкерный скрипт
└── ADC_UART_HAL.ioc       # STM32CubeMX файл конфигурации
```
## Подключение
```
STM32F103C8T6 ("Blue Pill"):

**PA1 (ADC1_IN1)** — аналоговый вход (подключаем к +3.3v через потенциометр 10КОм)
**PA9 (TX)** — UART передача (к TX преобразователя USB-UART CH340G)
**PA10 (RX)** — UART приём *(не используется)*

Преобразователь USB-UART CH340G:
**TX и GND** USB-UART к **PA9 и GND** Blue Pill
```
- [Монтажная схема](https://github.com/user-attachments/assets/d8eca711-790c-481c-9e2c-182399bc5016)
- [Подключение ST-LINK V2](https://github.com/user-attachments/assets/11cf20ef-1757-43f4-bd80-f0e9caa32841)
- [Подключение USB-UART CH340G](https://github.com/user-attachments/assets/635f70f6-237e-441c-b5aa-54983d74e659)

## Конфигурация (из CubeMX)

| Периферия | Параметры               |
|-----------|-------------------------|
| ADC1      | Single channel, Polling |
| UART1     | 115200 baud, 8N1        |

АЦП сконфигурирован для считывания аналогового напряжения с канала ADC1_IN1 (подключенного к выводу PA1), к которому между 3,3В и GND подключен потенциометр.

- [Конфигурация в CubeMX](https://github.com/user-attachments/assets/9efbe196-3f7a-48ba-95bf-639f2d71ce29)

На STM32F103C8T6 (и вообще на большинстве STM32F1) разрешение АЦП (ADC) фиксировано и составляет 12 бит. Это значит, что значения, возвращаемые АЦП, находятся в диапазоне от 0 до 4095. Таким образом:
- Максимальное значение АЦП = 2^12 - 1 = 4095.
- Минимальное значение АЦП = 0.
- Например, если +3.3V подключить к входу АЦП, то HAL_ADC_GetValue() вернёт 4095.
- При 0V — будет 0.
- При 1.65V — будет примерно 2047.

## Зависимости

Проект не использует внешние библиотеки кроме STM32 HAL.

## Как прошить и протестировать

1. Открыть проект в STM32CubeIDE.
2. Собрать (`Ctrl + B`).
3. Подключить ST-Link и прошить (`Run → Debug` / `Ctrl + F11`).
4. Подключить преобразователь USB-UART CH340G.
5. Открыть любой терминал на ПК(я использовал UART Assistant v5.0.1), использовав ниже приведенные настройки, открыть порт и наблюдать вывод значений. 

### Настройки UART Assistant
- Channel: выбрать тот COM-Port, к которому подключен USB-UART преобразоватьель.
- Baud rate: 115200.
- Data bits: 8.
- Stop bit: 1.
- Parity: None.
- Flowctrl: None.

## Связанные проекты

- [STM32 DHT11 UART](https://github.com/Metabolisto/stm32_dht11_uart) 